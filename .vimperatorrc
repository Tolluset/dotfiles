" .vimperatorrc
" author janus_wel <janus.wel.3@gmail.com>
" for 2.0pre (created: 2008/12/10 07:30:02)
" Last Change: 2009/02/12 19:54:24.

" options -----------------------------------------------------------------
" safe mode
"set noloadplugins

" title bar
set titlestring="Firefox with Vimperator"

" default search/suggest engine: google
set defsearch=google
set suggestengines=google

" completion priority in :[tab]open
" bookmarks, suggestions, awesome bar
set complete=bSl

" don't focus the new opened tab automatically
set activate=

" scroll height of <C-d> / <C-u>
set scroll=3

" use custom matching feature (XUL/Migemo by migemo_hint.js) in hints mode
set hintmatching=custom

" need <CR> anytime in hints mode
set followhints=1

" all type pages are opened in new tab
" addons + downloads + help + javascript + prefs
set newtab=all

" display tab-bar anytime
set showtabline=2

" show sorted completions automatically
set wildoptions=auto,sort

" don't focus any "input" elements automatically when open pages.
set focuscontent

" HTTP header(request/response), cookie
" move to autocmd (below)
"set pageinfo=gmchH

" show right and bottom scroll bar
set guioptions=rb


" preferences ( Firefox about:config ) ------------------------------------
" tabs ---
" display tab-bar anytime
set! browser.tabs.autoHide=false

" don't animate tab-bar when switch to fullscreen
set! browser.fullscreen.animateUp=0

" hide close buttons
set! browser.tabs.closeButtons=2

" open tab in the background
set! browser.tabs.loadDivertedInBackground=true

" tab width is 24px
set! browser.tabs.tabMaxWidth=24
set! browser.tabs.tabMinWidth=24

" miscs ---
" case-sensitive when find
set! accessibility.typeaheadfind.casesensitive=1

" don't resize when open images
set! browser.enabel_automatic_image_resizing=false

" the number of URL-completions is 20
set! browser.urlbar.maxRichResults=20

" the number of popups is 100
set! dom.popup_maximum=100

" activate spell-check textarea/input
set! layout.spellcheckDefault=2
set! spellchecker.dictionary=en-US

" don't select trailing spaces, when select words.
set! layout.word_select.eat_space_to_next_word=false

" don't show download-manager
set! browser.download.manager.showWhenStarting=false


" variables ---------------------------------------------------------------
" this must be set before map operation, otherwise use default value.
let mapleader=','


" mappings ----------------------------------------------------------------
" clear all key mappings
" to avoid troubles from loading rc file several times
mapclear
cmapclear
imapclear

" tab operation
noremap <C-h> gT
noremap <C-l> gt
noremap <C-p> :tabmove! -1<CR>
noremap <C-n> :tabmove! +1<CR>

" we love echo
noremap e :echo<Space>

" pageinfo short-cut
noremap I :pageinfo<CR>

" scrooooooooll
noremap J <C-d>
noremap K <C-u>

" fuckups
noremap p <Nop>
noremap <C-k> <Nop>

" escape <C-a> / <C-x>
noremap <C-w> <C-a>
noremap <C-e> <C-x>

" Windows keybind
noremap <C-a> <C-v><C-a>
noremap <C-c> <C-v><C-c>
noremap <C-s> <C-v><C-s>

inoremap <C-a> <C-v><C-a>
inoremap <C-c> <C-v><C-c>
inoremap <C-s> <C-v><C-s>
inoremap <C-x> <C-v><C-x>
inoremap <C-v> <C-v><C-v>
inoremap <C-z> <C-v><C-z>
inoremap <C-y> <C-v><C-y>

cnoremap <C-a> <C-v><C-a>
cnoremap <C-c> <C-v><C-c>
cnoremap <C-s> <C-v><C-s>
cnoremap <C-x> <C-v><C-x>
cnoremap <C-v> <C-v><C-v>
cnoremap <C-z> <C-v><C-z>
cnoremap <C-y> <C-v><C-y>

" fullscreen
noremap <F11> <C-v><F11>

" better safe than sorry
inoremap <C-h> <BS>
noremap <Leader>B :javascript content.document.body.focus();<CR>
noremap <Leader>d :redraw<CR>

" sourcing .vimperatorrc
noremap <Leader>r :source ~/.vimperatorrc<CR>


" plugins -----------------------------------------------------------------
" plugin: direct_bookmark.js
" move to .vimperatorrc.js
noremap B :sbm<Space>

" plugin: sbmcommentsviewer.js
" move to .vimperatorrc.js
"noremap v :viewSBMComments -t hd

" plugin: copy.js
noremap C :copy title<CR>

" plugin: blinkelement.js
noremap <Leader>b :bl content.document.getElement
noremap <Leader>e :bl buffer.evaluateXPath('

" plugin: noscript.js
noremap <Leader>s :noscript toggletemp<CR>
noremap <Leader>S :noscript toggleperm<CR>

" plugin: ldrize_cooperation.js
noremap <Leader>l :toggleldrizecooperation<CR>

" plugin: multi_requester.js
noremap E :mr<Space>alc<Space>
noremap W :mr<Space>goo<Space>
noremap A :mr<Space>answers<Space>

" plugin: direct_bookmark.js
" use service: delicious, はてなブックマーク
let direct_sbm_use_services_by_post='dh'
let direct_sbm_use_services_by_tag='dh'

" plugin: matanico.js
let matanico_watch_servicename='またニコ'
let matanico_watch_format='$SERVICENAME : $COMMENT [$SUBJECT]($PLAYTIME) - $URL'
let matanico_tag_servicename='またニコタグ'
let matanico_tag_format='$SERVICENAME : $COMMENT [$TAG]($NUMOFVIDEOS件) - $URL'
let matanico_related_tag_servicename='またニコタグ(キーワード)'
let matanico_related_tag_format='$SERVICENAME : $COMMENT [$KEYWORD]($NUMOFTAGS件) - $URL'

" plugin: reading.js
let reading_servicename='reading'
let reading_format='$SERVICENAME : $COMMENT [$TITLE] $URL $SELECTED'

" plugin: nnp_cooperation.js
let nnp_coop_numoflist='7'

" plugin: ime_controller.js
let ex_ime_mode='inactive'
let textarea_ime_mode='inactive'

" plugin: clock.js
let clock_format='[%t %d]'

" plugin: imageextender.js
let image_extender_skip_prompt='false'

" plugin: hidecritter.js
let hidecritter_mapping='H'
let hatena_star_hint_mapping='h'

" plugin: PMWriter.js
let pmwriter_plugin_dir = '~\vimperator\plugin'
let pmwriter_output_dir = '~\vimperator\plugin\help\'


" source extra resources --------------------------------------------------
" javascript
source ~/.vimperatorrc.js

" css
"source ~/.vimperatorrc.css


" autocmd -----------------------------------------------------------------
" clear all autocmds to avoid troubles from loading rc fle several times
autocmd!

" define key mappings for video sites
" defined by .vimperatorrc.js
autocmd LocationChange .* :js liberator.plugins.nicomap()

" fmap ---
" all clear
autocmd LocationChange .* :fmapc

" Fastladder
" pass through default keybinds
autocmd LocationChange http://fastladder\\.com/reader/ :fmap j k s a p o q w r <Del>
autocmd LocationChange http://fastladder\\.com/reader/ :fmap J,<Space> K,<S-Space> <,> >,< /,f
" LDR Full Feed
autocmd LocationChange http://fastladder\\.com/reader/ :fmap v,g V,G
" LDR + Tombloo
autocmd LocationChange http://fastladder\\.com/reader/ :fmap B,T
autocmd LocationChange http://fastladder\\.com/reader/ :fmap g,t G,b z,Z
" Hatena Bookmark Comment
autocmd LocationChange http://fastladder\\.com/reader/ :fmap c,C C,F S

" livedoor Reader
" pass through default keybinds
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap j k s a p o q w r <Del>
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap J,<Space> K,<S-Space> <,> >,< /,f
" LDR Full Feed
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap v,g V,G
" LDR + Tombloo
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap B,T
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap g,t G,b z,Z
" Hatena Bookmark Comment
autocmd LocationChange http://reader\\.livedoor\\.com/reader/ :fmap c,C C,F S

" Remember the Milk
" add / complete / edit / delete tasks
autocmd LocationChange https?://www\\.rememberthemilk\\.com/home/[^/]+/#section\\.tasks :fmap C,t c V,p v,d w,f q,g s Q,u W,l S,y I,r U,z <C-1>,1 <C-2>,2 <C-3>,3 <C-0>,4 <Del>
" select tasks / tab switch / multiple mode
autocmd LocationChange https?://www\\.rememberthemilk\\.com/home/[^/]+/#section\\.tasks :fmap a n k j i h m
" list switch
autocmd LocationChange https?://www\\.rememberthemilk\\.com/home/[^/]+/#section\\.tasks :fmap <C-H>,<C-S-Left> <C-L>,<C-S-Right>

" Mitter
" w/q for Mitter kbd raging changer
autocmd LocationChange http://mitter\\.jp/edit :fmap w q


" set ---
" option c/h/H is defined by plugin,
" the timing ':set pageinfo' is at the ready of vimperator
autocmd VimperatorEnter .* :set pageinfo=gmchH


" finish ------------------------------------------------------------------
echo "GET READY!!"

" vim: ft=vimperator sw=4 sts=4 ts=4 et
